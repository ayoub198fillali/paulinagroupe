!function(s){s.fn.imagePopup=function(i){var a=s.extend({overlay:"rgba(0, 0, 0, 0.5)",closeButton:{src:null,width:"30px",height:"30px"},imageBorder:"5px solid #ffffff",borderRadius:"5px",imageWidth:"500px",imageHeight:"400px",imageCaption:{exist:!0,color:"#ffffff",fontSize:"20px"},open:null,close:null},i);return this.each(function(){(t=s("<div></div>")).css({background:a.overlay,position:"absolute",top:"0px",left:"0px",display:"none","text-align":"center",width:"100%",height:"100%","padding-top":"5%"}),s("body").append(t);var t,i,e,o,n={color:"white",cursor:"pointer","font-size":"20px",width:a.closeButton.width,height:a.closeButton.height,position:"absolute",top:"5px",right:"5px",border:"0px","z-index":"1"};a.closeButton.src?(i=s("<img>")).attr("src",a.closeButton.src):i=s("<span>X</span>"),i.css(n),t.append(i),(e=s("<img>")).css({width:a.imageWidth,height:a.imageHeight,border:a.imageBorder,"border-radius":a.borderRadius}),t.append(e),1==a.imageCaption.exist&&((o=s("<p></p>")).css({color:a.imageCaption.color,"font-size":a.imageCaption.fontSize}),t.append(o)),s(this).find("a").on("click",function(i){i.preventDefault();var i=s(this).children("img").attr("src");e.attr("src",i),1==a.imageCaption.exist&&(i=s(this).children("img").attr("alt"),o.text(i)),s.isFunction(a.open)&&a.open.call(this),t.css({opacity:.1}).show().animate({opacity:1})}),i.click(function(){console.log("closeButton"),s.isFunction(a.close)&&a.close.call(this),t.animate({opacity:.1},function(){t.hide()})})})}}(jQuery);