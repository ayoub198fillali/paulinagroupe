function MultiSelectTag(e,n={shadow:!1,rounded:!0}){var t=null,l=null,d=null,a=null,i=null,s=null,o=null,c=null,r=null,u=null,p=null,v=null,m=new DOMParser;function h(e=null){for(var n of(v.innerHTML="",l)){var t;n.selected?function(e){for(var n of o.children)if(!n.classList.contains("input-body")&&n.firstChild.dataset.value==e)return 1;return}(n.value)||function(n){var e=document.createElement("div"),t=(e.classList.add("item-container"),document.createElement("div")),d=(t.classList.add("item-label"),t.innerHTML=n.label,t.dataset.value=n.value,(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="item-close-svg">\n                <line x1="18" y1="6" x2="6" y2="18"></line>\n                <line x1="6" y1="6" x2="18" y2="18"></line>\n                </svg>',"image/svg+xml").documentElement);d.addEventListener("click",e=>{l.find(e=>e.value==n.value).selected=!1,f(n.value),h(),w()}),e.appendChild(t),e.appendChild(d),o.append(e)}(n):((t=document.createElement("li")).innerHTML=n.label,t.dataset.value=n.value,(e&&n.label.toLowerCase().startsWith(e.toLowerCase())||!e)&&v.appendChild(t))}}function L(){for(var e of v.children)e.addEventListener("click",n=>{l.find(e=>e.value==n.target.dataset.value).selected=!0,r.value=null,h(),w(),r.focus()})}function f(e){for(var n of o.children)n.classList.contains("input-body")||n.firstChild.dataset.value!=e||o.removeChild(n)}function w(){for(var e=0;e<l.length;e++)t.options[e].selected=l[e].selected}t=document.getElementById(e),l=[...t.options].map(e=>({value:e.value,label:e.label,selected:e.selected})),t.classList.add("hidden"),(d=document.createElement("div")).classList.add("mult-select-tag"),(a=document.createElement("div")).classList.add("wrapper"),(s=document.createElement("div")).classList.add("body"),n.shadow&&s.classList.add("shadow"),n.rounded&&s.classList.add("rounded"),(o=document.createElement("div")).classList.add("input-container"),(r=document.createElement("input")).classList.add("input"),r.placeholder=""+(n.placeholder||"Search..."),(c=document.createElement("inputBody")).classList.add("input-body"),c.append(r),s.append(o),(i=document.createElement("div")).classList.add("btn-container"),(u=document.createElement("button")).type="button",i.append(u),e=m.parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n            <polyline points="18 15 12 21 6 15"></polyline></svg>',"image/svg+xml").documentElement,u.append(e),s.append(i),a.append(s),(p=document.createElement("div")).classList.add("drawer","hidden"),n.shadow&&p.classList.add("shadow"),n.rounded&&p.classList.add("rounded"),p.append(c),v=document.createElement("ul"),p.appendChild(v),d.appendChild(a),d.appendChild(p),t.nextSibling?t.parentNode.insertBefore(d,t.nextSibling):t.parentNode.appendChild(d),h(),L(),w(),$(".btn-container").on("click",function(){p.classList.contains("hidden")&&(h(),L(),p.classList.remove("hidden"),r.focus())}),u.addEventListener("click",()=>{p.classList.contains("hidden")&&(h(),L(),p.classList.remove("hidden"),r.focus())}),r.addEventListener("keyup",e=>{h(e.target.value),L()}),r.addEventListener("keydown",n=>{if("Backspace"===n.key&&!n.target.value&&1<o.childElementCount){const n=s.children[o.childElementCount-2].firstChild;l.find(e=>e.value==n.dataset.value).selected=!1,f(n.dataset.value),w()}}),window.addEventListener("click",e=>{d.contains(e.target)||p.classList.add("hidden")})}